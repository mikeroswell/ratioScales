<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ratioScales">
<title>centiNels • ratioScales</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="centiNels">
<meta property="og:description" content="ratioScales">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XLCJHJKT0M"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XLCJHJKT0M');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ratioScales</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Ratio_scales_and_centinels.html">Ratio scales and centinels</a>
    <a class="dropdown-item" href="../articles/centiNels.html">centiNels</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="centiNels_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>centiNels</h1>
            
      
      
      <div class="d-none name"><code>centiNels.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mikeroswell.github.io/ratioScales/">ratioScales</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html" class="external-link">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
          <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>,
                                           vjust <span class="op">=</span> <span class="fl">1</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>On 1 April, 2020, a Canadian dollar (CAD) cost 0.703 US dollar (USD). The Canadian dollar gained strength pretty steadily for the next year, and by 1 July it would cost 0.736 USD, by 1 October, 0.753 USD, by 4 January 2021, 0.782 USD, and by April fools day 2021, 0.796 USD. How much is the exchange rate changing?</p>
<p>Often, such changes are described in terms of percent difference, even though this is sort of insane. Below is a brief peak at the insanity of percentage differences: any change in the exchange rate will be reflected as different percentage changes, depending on which direction you’re hoping to exchange currency:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">exch</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">date</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-04-01"</span>
                     , <span class="st">"2020-07-01"</span>
                     , <span class="st">"2020-10-01"</span>
                     , <span class="st">"2021-01-04"</span>
                     , <span class="st">"2021-04-01"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>percent_difference <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span><span class="op">*</span><span class="op">(</span><span class="va">exRate_scale</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">direction</span>, <span class="va">exRate</span>, <span class="va">percent_difference</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date"</span><span class="op">)</span>
              , names_from <span class="op">=</span> <span class="st">"direction"</span>
              , values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exRate"</span>, <span class="st">"percent_difference"</span><span class="op">)</span>
              , names_vary <span class="op">=</span> <span class="st">"slowest"</span>
              <span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 5</span></span>
<span class="co">#&gt;   date       exRate_CADtoUSD percent_differenc… exRate_USDtoCAD percent_differe…</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-04-01            1.42               0              0.703             0   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-07-01            1.36              -<span style="color: #BB0000;">4.52</span>           0.736             4.74</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-10-01            1.33              -<span style="color: #BB0000;">6.56</span>           0.753             7.02</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-01-04            1.28             -<span style="color: #BB0000;">10.1</span>            0.782            11.3 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-04-01            1.26             -<span style="color: #BB0000;">11.6</span>            0.796            13.2</span></code></pre></div>
<p>On 1 April 2021, US dollars had gotten much cheaper for Canadians than they had been a year previously… one US dollar cost less than 90% as much as a it had a year earlier (or a US dollar had lost over 10% of its value in CAD). Amazingly, over the same period, Canadian dollars got over 11% more expensive for Americans.</p>
<p>To put this more concretely, if Jonathan traded 100 CAD with Michael for 70.31 USD on 1 April 2020, doubtless he’d feel the fool come 1 April, 2021, when Michael would only give him  CAD back. He lost just over 10% of his original 100 CAD!</p>
<p>But would Michael, had he declined the trade in 2020, only to accept in 2021, feel even more foolish? He would have gotten 100 CAD for only 70.31 USD in 2020, but now the trade cost him 78.24 USD. In this world, Michael paid over 11% more in 2021 than he would have a year before… also a bad deal. But wait? Surely Michael declining the trade must be <em>exactly as bad</em> for him as Jonathan’s trade was for Jonathan? <em>And it would have been!</em> Michael would have given Jonathan 7.93 USD more in 2021 than in 2020 for the same 100 CAD… since he would have ultimately given Jonathan 78.24 USD, this is a loss (in 2021 dollars) of , i.e. the same 10.1% loss Jonathan would have experienced.</p>
<p>Woof. This is confusing! We <em>can</em> make the math work out… but we could also use better-behaved units!</p>
<!-- Next introduce log scaling, nels, centinels, and then show the cool
compounding 1 % and linear change in centinels, ideally with the exhange rate
data. The below is from the blog post -->
<div class="section level2">
<h2 id="copied-text-wont-make-sense-from-here">copied text, won’t make sense from here<a class="anchor" aria-label="anchor" href="#copied-text-wont-make-sense-from-here"></a>
</h2>
<p>“Centinels” look like they could be nice units for staring at this, but what the heck is 1 centinel? Amazingly, a centinel isn’t that funky a unit. Plus one centinel is pretty close to a 1% increase!</p>
<p>let’s take a look:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">5</span>, <span class="va">pi</span><span class="op">)</span>
<span class="co"># 1% increase</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">*</span><span class="fl">1.01</span> 
<span class="va">z</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">*</span><span class="fl">0.99</span>
<span class="va">w</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">/</span> <span class="fl">1.01</span>
<span class="va">centinel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">ref</span><span class="op">)</span><span class="op">{</span>
  <span class="fl">100</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">x</span><span class="op">/</span><span class="va">ref</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">percent</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">ref</span><span class="op">)</span><span class="op">{</span>
  <span class="fl">100</span><span class="op">*</span><span class="op">(</span><span class="va">x</span><span class="op">/</span><span class="va">ref</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span>
<span class="op">}</span>


<span class="fu">percent</span><span class="op">(</span><span class="va">y</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] 1 1 1</span>
<span class="co"># it's pretty close</span>
<span class="fu">centinel</span><span class="op">(</span><span class="va">y</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.9950331 0.9950331 0.9950331</span>


<span class="co"># compare to decreases</span>
<span class="fu">percent</span><span class="op">(</span><span class="va">z</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] -1 -1 -1</span>
<span class="co"># these are all close too</span>
<span class="fu">percent</span><span class="op">(</span><span class="va">w</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] -0.990099 -0.990099 -0.990099</span>

<span class="fu">centinel</span><span class="op">(</span><span class="va">z</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] -1.005034 -1.005034 -1.005034</span>
<span class="fu">centinel</span><span class="op">(</span><span class="va">w</span>, <span class="va">x</span><span class="op">)</span>  
<span class="co">#&gt; [1] -0.9950331 -0.9950331 -0.9950331</span>

<span class="co"># percents go additively, though. So it's hard to think about compounding them</span>
<span class="co"># which is what we usually want to do when things change</span>

<span class="co"># if COVID went up by 1% a day for five consecutive days, it would go up by </span>
<span class="co"># about 5 %. </span>
<span class="fl">1.01</span><span class="op">^</span><span class="fl">5</span>
<span class="co">#&gt; [1] 1.05101</span>
<span class="co"># But if it went up by 1% a day for fifty consecutive days</span>
<span class="fl">1.01</span><span class="op">^</span><span class="fl">50</span>
<span class="co">#&gt; [1] 1.644632</span>
<span class="co"># it would go up by more than 60%. This can really trip me up!</span>

<span class="co"># centinels compound much more sensibly</span>

<span class="va">compounded</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">change</span>, <span class="va">times</span><span class="op">)</span><span class="op">{</span>
  <span class="va">x</span><span class="op">*</span><span class="va">change</span><span class="op">^</span><span class="va">times</span>
<span class="op">}</span>

<span class="co"># compound 1% 50 times, you get a 64% increase</span>
<span class="fu">percent</span><span class="op">(</span><span class="fu">compounded</span><span class="op">(</span><span class="va">x</span>, <span class="fl">1.01</span>, <span class="fl">50</span><span class="op">)</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] 64.46318 64.46318 64.46318</span>

<span class="co"># but a 50 centinel increase :-)</span>
<span class="fu">centinel</span><span class="op">(</span><span class="fu">compounded</span><span class="op">(</span><span class="va">x</span>, <span class="fl">1.01</span>, <span class="fl">50</span><span class="op">)</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] 49.75165 49.75165 49.75165</span>

<span class="co"># try going backwards</span>
<span class="fu">percent</span><span class="op">(</span><span class="fu">compounded</span><span class="op">(</span><span class="va">x</span>, <span class="fl">0.99</span>, <span class="fl">50</span><span class="op">)</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] -39.49939 -39.49939 -39.49939</span>
<span class="co"># that's annoying. Only 39% now?!?!</span>


<span class="fu">centinel</span><span class="op">(</span><span class="fu">compounded</span><span class="op">(</span><span class="va">x</span>, <span class="fl">0.99</span>, <span class="fl">50</span><span class="op">)</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] -50.25168 -50.25168 -50.25168</span>
<span class="co"># still a change of 50 centinels</span>

<span class="co"># and more precisely opposite </span>
<span class="fu">centinel</span><span class="op">(</span><span class="fu">compounded</span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">1.01</span>, <span class="fl">50</span><span class="op">)</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] -49.75165 -49.75165 -49.75165</span></code></pre></div>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Michael Roswell, Jonathan Dushoff, Ben Bolker.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
