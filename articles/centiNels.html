<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ratioScales">
<title>centiNels • ratioScales</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="centiNels">
<meta property="og:description" content="ratioScales">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XLCJHJKT0M"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XLCJHJKT0M');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ratioScales</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Ratio_scales_and_centinels.html">Ratio scales and centinels</a>
    <a class="dropdown-item" href="../articles/centiNels.html">centiNels</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="centiNels_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>centiNels</h1>
            
      
      
      <div class="d-none name"><code>centiNels.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="foolish-percent-differences">Foolish percent differences<a class="anchor" aria-label="anchor" href="#foolish-percent-differences"></a>
</h3>
<p>On 1 April, 2020, a Canadian dollar (CAD) cost 0.703 US dollar (USD). The Canadian dollar gained strength pretty steadily for the next year, and by 1 July it would cost 0.736 USD, by 1 October, 0.753 USD, by 4 January 2021, 0.782 USD, and by April fools day 2021, 0.796 USD. How much is the exchange rate changing?</p>
<p>Often, such changes are described in terms of percent difference, even though this is sort of insane. Below is a brief peek at the insanity of percentage differences: any change in the exchange rate will be reflected as different percentage changes, depending on which direction you’re hoping to exchange currency.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">exch</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">date</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-04-01"</span>
                     , <span class="st">"2020-07-01"</span>
                     , <span class="st">"2020-10-01"</span>
                     , <span class="st">"2021-01-04"</span>
                     , <span class="st">"2021-04-01"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pct_diff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span><span class="op">*</span><span class="op">(</span><span class="va">exRate_scale</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">direction</span>, <span class="va">exRate</span>, <span class="va">pct_diff</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date"</span><span class="op">)</span>
              , names_from <span class="op">=</span> <span class="st">"direction"</span>
              , values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exRate"</span>, <span class="st">"pct_diff"</span><span class="op">)</span>
              , names_vary <span class="op">=</span> <span class="st">"slowest"</span>
              <span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 5</span></span>
<span class="co">#&gt;   date       exRate_CADtoUSD pct_diff_CADtoUSD exRate_USDtoCAD pct_diff_USDtoCAD</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-04-01            1.42              0              0.703              0   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-07-01            1.36             -<span style="color: #BB0000;">4.52</span>           0.736              4.74</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-10-01            1.33             -<span style="color: #BB0000;">6.56</span>           0.753              7.02</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2021-01-04            1.28            -<span style="color: #BB0000;">10.1</span>            0.782             11.3 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2021-04-01            1.26            -<span style="color: #BB0000;">11.6</span>            0.796             13.2</span></code></pre></div>
<!-- cut text for now:
On 1 April 2021, US dollars had gotten much cheaper for Canadians than they had
been a year previously... one US dollar cost less than 90% as much as a it had a
year earlier (or a US dollar had lost just over 10% of its value in CAD). Amazingly,
over the same period, Canadian dollars got a bit over 11% more expensive for
Americans... the 10% gain corresponded to an 11% loss. 
-->
<p>If Jonathan traded 100 CAD with Michael for 70.31 USD on 1 April 2020, doubtless he’d feel the fool come 1 April, 2021, when Michael would only give him <span class="math inline">\(70.31/0.782411 = 89.86\)</span> CAD back. He lost just over 10% of his original 100 CAD!</p>
<p>But would Michael, had he declined the trade in 2020, only to accept in 2021, feel even more foolish? He would have gotten 100 CAD for only 70.31 USD in 2020, but now the trade cost him 78.24 USD. In this world, Michael paid over 11% (almost $8 USD) more in 2021 than he would have a year before… also a bad deal.</p>
<p>But wait? Surely Michael declining the trade must be <em>exactly as bad</em> for him as Jonathan’s trade was <em>good</em> for Jonathan? <em>And it would have been!</em> Michael would have given Jonathan 7.93 USD more in 2021 than in 2020 for the same 100 CAD… since he would have ultimately given Jonathan 78.24 USD, this is a loss (in 2021 dollars) of <span class="math inline">\(7.93/78.24 = 0.101\)</span>, i.e. the same 10.1% loss Jonathan would have experienced.</p>
<p>Woof. This is confusing! We <em>can</em> make the math work out… but we could also use a better-behaved scale… like the natural log scale.</p>
</div>
<div class="section level3">
<h3 id="logarithmic-scaling-nels-instead">Logarithmic scaling: Nels instead<a class="anchor" aria-label="anchor" href="#logarithmic-scaling-nels-instead"></a>
</h3>
<p>Logarithmic transformation is an excellent solution* to this problem. It makes all ratio-based changes linear.</p>
<p>* <em>Familiarity and comfort with logarithms can be major drawbacks; we refer users to the “divMult” vignette for further discussion and some good workarounds</em></p>
<p>A first step to making the math work is rescaling the data by taking the natural logarithm. This is hardly a new idea. One idea explored in <strong>ratioScales</strong> is that we can simply use natural logarithm <em>units</em> as our measure of change. Once log-transformed, changes in exchange rate in one direction will be mirrored by changes in exchange rate in the other direction <em>of the exact same magnitude</em>. <strong>ratioScales</strong> is all about plotting that retains this symmetry, and in this vignette, we illustrate simply using a “base e” fold change (one “nel”) as the plotting unit. This can be a sensible alternative to the common practice of, after a logarithmic transformation, back-transforming data onto the original scale for plotting. <strong>ggplot2</strong> users will likely be familiar with the functions <code>scale_*_log10()</code>, which do that.</p>
<!-- is this divergent, going into what we think people might do without our
package? Does this belong before or after introducing the new stuff? -->
<p>Perhaps now, the idiomatic way to plot the currency data in <strong>ggplot2</strong> is to use the raw exchange rates (we’ll say, scaled to the starting value so we can watch relative change), transform the y-axis by taking the base-10 logarithm, but mark the axes by exponentiating back to the original exchange rate scale.</p>
<p>Here is an example of the exchange rates on the original and base-10 logarithmic scales:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># first, without logarithmic rescaling</span>
<span class="va">exch</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">exRate_scale</span>, color <span class="op">=</span> <span class="va">direction</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">1</span>, width <span class="op">=</span> <span class="fl">0.2</span> <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">exch</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">date</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-04-01"</span>
                                 , <span class="st">"2020-07-01"</span>
                                 , <span class="st">"2020-10-01"</span>
                                 , <span class="st">"2021-01-04"</span>
                                 , <span class="st">"2021-04-01"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
    , size <span class="op">=</span> <span class="fl">5</span>
    , shape <span class="op">=</span> <span class="fl">23</span>
    , color <span class="op">=</span> <span class="st">"black"</span>
    , fill <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fl">4</span>, <span class="st">"Plasma"</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"exchange rate"</span>, main <span class="op">=</span> <span class="st">"orignal scale"</span><span class="op">)</span>  <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>n.breaks <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>
<span class="co">#&gt; Warning: Ignoring unknown parameters: width</span>
<span class="co">#&gt; Warning: Removed 46 rows containing missing values (geom_point).</span>

<span class="co"># second, with log10 transformation of y-axis</span>

<span class="va">exch</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">exRate_scale</span>, color <span class="op">=</span> <span class="va">direction</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">1</span>, width <span class="op">=</span> <span class="fl">0.2</span> <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">exch</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">date</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-04-01"</span>
                                 , <span class="st">"2020-07-01"</span>
                                 , <span class="st">"2020-10-01"</span>
                                 , <span class="st">"2021-01-04"</span>
                                 , <span class="st">"2021-04-01"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
    , size <span class="op">=</span> <span class="fl">5</span>
    , shape <span class="op">=</span> <span class="fl">23</span>
    , fill <span class="op">=</span> <span class="st">"red"</span>
    , color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.colors</a></span><span class="op">(</span><span class="fl">4</span>, <span class="st">"Plasma"</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"exchange rate"</span>, main <span class="op">=</span> <span class="st">"logarithmic scale"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span>n.breaks <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>
<span class="co">#&gt; Warning: Ignoring unknown parameters: width</span>
<span class="co">#&gt; Removed 46 rows containing missing values (geom_point).</span></code></pre></div>
<p><img src="centiNels_files/figure-html/idiomatic%20ggplot%20currency%20graphs-1.png" width="45%" height="45%"><img src="centiNels_files/figure-html/idiomatic%20ggplot%20currency%20graphs-2.png" width="45%" height="45%"></p>
<p>The difference between these two graphs is pretty subtle. If you look closely, you’ll see the distance between 0.85 and 0.9 is substantially greater than the distance between 1.10 and 1.15 on the logarithmic y-axis graph (second), whereas, of course, they are the same distance apart on the arithmetic y-axis (first graph). This gives us a feel for the fact that a decrease of, say, 5% is a bigger change than an increase of 5%, but it’s still hard to see what is consistent between the two directions of exchange (which above, we said was one reason to prefer the log-transformations!).</p>
<p>An alternative is to view data on a logarithmic scale. Lots of bases can make sense for logarithms (e.g., 2, 10, or e); here we explore natural logarithms (base e = <code>exp(1)</code>). To do this, let’s indulge some nomenclature fun, then see what it can do for us.</p>
<p>First, let’s get the most basic unit here… what do we call 1 natural log unit? One <strong>N</strong>atural <strong>L</strong>og unit is “one nel” (one NL; one “nel”). How big is one nel? Actually, kind of big: a fold change of over 2.5, so an increase of one nel is over 2.5x.</p>
<p>There’s a nice solution to this: use 1/100th of a Nel as the unit, one “centiNel.” Just as we might use a percent rather than proportional difference, or a centimeter rather than a meter, it will often be convenient to use centinels to track modest changes… actually, just as the “Bel” is hardly used to measure differences in amplitude (decibels are used instead), we suspect that “centinels” may be more useful than “nels” in most cases. Furthermore, in this vignette we explore some intriguing numerical properties of the centinel.</p>
<!-- Next introduce log scaling, nels, centinels, and then show the cool
compounding 1 % and linear change in centinels, ideally with the exhange rate
data. The below is from the blog post -->
</div>
<div class="section level2">
<h2 id="copied-text-wont-make-sense-from-here">copied text, won’t make sense from here<a class="anchor" aria-label="anchor" href="#copied-text-wont-make-sense-from-here"></a>
</h2>
<p>“Centinels” look like they could be nice units for staring at this, but what the heck is 1 centinel? Amazingly, a centinel isn’t that funky a unit. Plus one centinel is pretty close to a 1% increase!</p>
<p>let’s take a look:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">5</span>, <span class="va">pi</span><span class="op">)</span>
<span class="co"># 1% increase</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">*</span><span class="fl">1.01</span> 
<span class="va">z</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">*</span><span class="fl">0.99</span>
<span class="va">w</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">/</span> <span class="fl">1.01</span>
<span class="va">centinel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">ref</span><span class="op">)</span><span class="op">{</span>
  <span class="fl">100</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">x</span><span class="op">/</span><span class="va">ref</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">percent</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">ref</span><span class="op">)</span><span class="op">{</span>
  <span class="fl">100</span><span class="op">*</span><span class="op">(</span><span class="va">x</span><span class="op">/</span><span class="va">ref</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span>
<span class="op">}</span>


<span class="fu">percent</span><span class="op">(</span><span class="va">y</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] 1 1 1</span>
<span class="co"># it's pretty close</span>
<span class="fu">centinel</span><span class="op">(</span><span class="va">y</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.9950331 0.9950331 0.9950331</span>


<span class="co"># compare to decreases</span>
<span class="fu">percent</span><span class="op">(</span><span class="va">z</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] -1 -1 -1</span>
<span class="co"># these are all close too</span>
<span class="fu">percent</span><span class="op">(</span><span class="va">w</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] -0.990099 -0.990099 -0.990099</span>

<span class="fu">centinel</span><span class="op">(</span><span class="va">z</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] -1.005034 -1.005034 -1.005034</span>
<span class="fu">centinel</span><span class="op">(</span><span class="va">w</span>, <span class="va">x</span><span class="op">)</span>  
<span class="co">#&gt; [1] -0.9950331 -0.9950331 -0.9950331</span>

<span class="co"># percents go additively, though. So it's hard to think about compounding them</span>
<span class="co"># which is what we usually want to do when things change</span>

<span class="co"># if COVID went up by 1% a day for five consecutive days, it would go up by </span>
<span class="co"># about 5 %. </span>
<span class="fl">1.01</span><span class="op">^</span><span class="fl">5</span>
<span class="co">#&gt; [1] 1.05101</span>
<span class="co"># But if it went up by 1% a day for fifty consecutive days</span>
<span class="fl">1.01</span><span class="op">^</span><span class="fl">50</span>
<span class="co">#&gt; [1] 1.644632</span>
<span class="co"># it would go up by more than 60%. This can really trip me up!</span>

<span class="co"># centinels compound much more sensibly</span>

<span class="va">compounded</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">change</span>, <span class="va">times</span><span class="op">)</span><span class="op">{</span>
  <span class="va">x</span><span class="op">*</span><span class="va">change</span><span class="op">^</span><span class="va">times</span>
<span class="op">}</span>

<span class="co"># compound 1% 50 times, you get a 64% increase</span>
<span class="fu">percent</span><span class="op">(</span><span class="fu">compounded</span><span class="op">(</span><span class="va">x</span>, <span class="fl">1.01</span>, <span class="fl">50</span><span class="op">)</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] 64.46318 64.46318 64.46318</span>

<span class="co"># but a 50 centinel increase :-)</span>
<span class="fu">centinel</span><span class="op">(</span><span class="fu">compounded</span><span class="op">(</span><span class="va">x</span>, <span class="fl">1.01</span>, <span class="fl">50</span><span class="op">)</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] 49.75165 49.75165 49.75165</span>

<span class="co"># try going backwards</span>
<span class="fu">percent</span><span class="op">(</span><span class="fu">compounded</span><span class="op">(</span><span class="va">x</span>, <span class="fl">0.99</span>, <span class="fl">50</span><span class="op">)</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] -39.49939 -39.49939 -39.49939</span>
<span class="co"># that's annoying. Only 39% now?!?!</span>


<span class="fu">centinel</span><span class="op">(</span><span class="fu">compounded</span><span class="op">(</span><span class="va">x</span>, <span class="fl">0.99</span>, <span class="fl">50</span><span class="op">)</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] -50.25168 -50.25168 -50.25168</span>
<span class="co"># still a change of 50 centinels</span>

<span class="co"># and more precisely opposite </span>
<span class="fu">centinel</span><span class="op">(</span><span class="fu">compounded</span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">1.01</span>, <span class="fl">50</span><span class="op">)</span>, <span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] -49.75165 -49.75165 -49.75165</span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Michael Roswell, Jonathan Dushoff, Ben Bolker.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
